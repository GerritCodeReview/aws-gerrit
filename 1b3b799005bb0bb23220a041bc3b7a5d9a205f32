{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "707231c8_bc8634db",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2020-10-27T20:09:42Z",
      "side": 1,
      "message": "empty line to be added after L19",
      "revId": "1b3b799005bb0bb23220a041bc3b7a5d9a205f32",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b8243106_078b5776",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-10-28T08:33:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "707231c8_bc8634db",
      "revId": "1b3b799005bb0bb23220a041bc3b7a5d9a205f32",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4519233_b149b853",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2020-10-27T20:09:42Z",
      "side": 1,
      "message": "empty line to remove",
      "revId": "1b3b799005bb0bb23220a041bc3b7a5d9a205f32",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8ee23319_b44820c4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-10-28T08:33:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f4519233_b149b853",
      "revId": "1b3b799005bb0bb23220a041bc3b7a5d9a205f32",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8640dd7b_9a91d73f",
        "filename": "dual-master/cf-service-master.yml",
        "patchSetId": 2
      },
      "lineNbr": 237,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2020-10-27T20:09:42Z",
      "side": 1,
      "message": "It is a bit obscure to me how this achieves the fact that master1 and master2 would end up into different EC2 instances. Can you explain it?",
      "range": {
        "startLine": 237,
        "startChar": 30,
        "endLine": 237,
        "endChar": 146
      },
      "revId": "1b3b799005bb0bb23220a041bc3b7a5d9a205f32",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20c9aa05_9319b9a3",
        "filename": "dual-master/cf-service-master.yml",
        "patchSetId": 2
      },
      "lineNbr": 237,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-10-28T13:50:20Z",
      "side": 1,
      "message": "There are only 2 instances where master1 and master2 can be placed: the ones tagged with \"master\".\n\nmaster1 is deployed first and it can be paced anywhere on an ec2-instance tagged as \"master\".\n\nmaster2 then, should be placed whenever master1 is not running, hence this check.\n\nattribute:target_group \u003d\u003d master and runningTasksCount \u003d\u003d 0\n\nThis works, but it is a bit weak, because if in the future something else will be running on instances tagged as \u0027master\u0027s, it might prevent master2 from finding a suitable instance to run.\n\nThe alternative (but slightly more involved approach) is to have 2 separate ASG for master: one for master-1 and one for master-2, so that they can be tagged with a different label.\n\nThen we can place master1 where\n\n `taget_group \u003d\u003d master1`\n\nand master2 where\n\n target_group \u003d\u003d master2.\n\nWDYT?",
      "parentUuid": "8640dd7b_9a91d73f",
      "range": {
        "startLine": 237,
        "startChar": 30,
        "endLine": 237,
        "endChar": 146
      },
      "revId": "1b3b799005bb0bb23220a041bc3b7a5d9a205f32",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "01c869b6_fd628ca1",
        "filename": "dual-master/cf-service-master.yml",
        "patchSetId": 2
      },
      "lineNbr": 237,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-10-28T14:06:44Z",
      "side": 1,
      "message": "Sorry maybe a bit naive approach but if we can check runningTasksCount maybe we can check what kind of tasks we are running to make sure that master is not already placed on that instance",
      "parentUuid": "20c9aa05_9319b9a3",
      "range": {
        "startLine": 237,
        "startChar": 30,
        "endLine": 237,
        "endChar": 146
      },
      "revId": "1b3b799005bb0bb23220a041bc3b7a5d9a205f32",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d63531de_2f8c0fe6",
        "filename": "dual-master/cf-service-master.yml",
        "patchSetId": 2
      },
      "lineNbr": 237,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-10-28T14:35:15Z",
      "side": 1,
      "message": "It\u0027s a good point @marcin,\nI have also tried to find such an attribute, but unfortunately that\u0027s not available:\n- This is the query expression language we can use[1]\n- these are the defaults attribute we can leverage[2]\n\nCan you think of a way to distinguish master-1 and master-2 without having to create two ASG?\n\n[1]https://docs.aws.amazon.com/AmazonECS/latest/developerguide/cluster-query-language.html\n\n[2]https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-placement-constraints.html#attributes",
      "parentUuid": "01c869b6_fd628ca1",
      "range": {
        "startLine": 237,
        "startChar": 30,
        "endLine": 237,
        "endChar": 146
      },
      "revId": "1b3b799005bb0bb23220a041bc3b7a5d9a205f32",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}