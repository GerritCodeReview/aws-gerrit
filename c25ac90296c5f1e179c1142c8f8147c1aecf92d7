{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1890b763_5b20a5eb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-21T17:08:00Z",
      "side": 1,
      "message": "Hi Marcin, please have a look at this.",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a00beeba_561dd573",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-22T12:27:40Z",
      "side": 1,
      "message": "Tony, let me know your thoughts.",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7e069c86_8769aa9c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-22T12:29:10Z",
      "side": 1,
      "message": "Marcin, I guess that the title should be changed migration from v3.2 to 3.5.4 because 3.4.6 is archived.",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d20464c3_64a834bb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-12-22T21:12:34Z",
      "side": 1,
      "message": "@maczech@gmail.com, @alvaro.vilaplana@gmail.com, I understand this work is only for dual-primary, but we should always keep all other recipes in sync too.\n\nIs there any plan/card to migrate primary-replica recipe too?",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "711beb11_4dc54529",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-23T11:09:29Z",
      "side": 1,
      "message": "Tony, lets catch up whenever you are back.",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b1df788d_5379cefb",
        "filename": "dual-primary/Makefile",
        "patchSetId": 13
      },
      "lineNbr": 23,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-21T17:08:00Z",
      "side": 1,
      "message": "I dont know why we added `global-refdb~${GLOBALREFDB_LIB_VER}`",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3ac292f_54228828",
        "filename": "dual-primary/Makefile",
        "patchSetId": 13
      },
      "lineNbr": 23,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2022-12-21T17:44:32Z",
      "side": 1,
      "message": "because global-refdb is not a part of multi-site.jar anymore",
      "parentUuid": "b1df788d_5379cefb",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03d3eaf9_9c397164",
        "filename": "dual-primary/Makefile",
        "patchSetId": 13
      },
      "lineNbr": 546,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-12-22T09:23:42Z",
      "side": 1,
      "message": "nit: unrelated new line",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "558ecc52_fcb19855",
        "filename": "dual-primary/cf-service-primary.yml",
        "patchSetId": 13
      },
      "lineNbr": 43,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-12-22T21:12:34Z",
      "side": 1,
      "message": "All new environment variables need to be added to the `setup.env.template`.\nAlso they all need to be documented in the relevant `md` file(s).",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d28c237e_6d91b154",
        "filename": "dual-primary/cf-service-primary.yml",
        "patchSetId": 13
      },
      "lineNbr": 203,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-12-22T21:12:34Z",
      "side": 1,
      "message": "This is used only for pull-replication, consider renaming the description (and perhaps the parameter) accordingly to its purpose.",
      "range": {
        "startLine": 203,
        "startChar": 35,
        "endLine": 203,
        "endChar": 82
      },
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "589117af_696ed2c4",
        "filename": "dual-primary/cf-service-primary.yml",
        "patchSetId": 13
      },
      "lineNbr": 205,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-12-22T09:23:42Z",
      "side": 1,
      "message": "Shouldn\u0027t this come as a secret rather than being passed as parameter?",
      "range": {
        "startLine": 202,
        "startChar": 0,
        "endLine": 205,
        "endChar": 19
      },
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eeabefc5_27129771",
        "filename": "dual-primary/cf-service-primary.yml",
        "patchSetId": 13
      },
      "lineNbr": 205,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-22T12:27:40Z",
      "side": 1,
      "message": "Indeed, but we decided to keep it simple at the beginning and introduce that once we have everything working for dual primary.",
      "parentUuid": "589117af_696ed2c4",
      "range": {
        "startLine": 202,
        "startChar": 0,
        "endLine": 205,
        "endChar": 19
      },
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3cabf62_942495cf",
        "filename": "dual-primary/cf-service-primary.yml",
        "patchSetId": 13
      },
      "lineNbr": 205,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-12-22T21:12:34Z",
      "side": 1,
      "message": "\u003e Indeed, but we decided to keep it simple at the beginning and introduce that once we have everything working for dual primary.\n\nTo be honest, I think this way is more involved because the variable has to be set in the setup.env, in the Makefile, in the cloudformation, in the python script etc.\n\nIf the variable was coming from the secret manager directly all of this could be avoided.\n\nAnyway, up to you we can do this as a follow up change if you prefer",
      "parentUuid": "eeabefc5_27129771",
      "range": {
        "startLine": 202,
        "startChar": 0,
        "endLine": 205,
        "endChar": 19
      },
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6bea1e63_de990dc9",
        "filename": "dual-primary/cf-service-replica.yml",
        "patchSetId": 13
      },
      "lineNbr": 233,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-12-22T09:23:42Z",
      "side": 1,
      "message": "as above, shouldn\u0027t this come from secret manager, like we do for all other secrets?",
      "range": {
        "startLine": 230,
        "startChar": 0,
        "endLine": 233,
        "endChar": 19
      },
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cbf336c6_0f4a5c3b",
        "filename": "dual-primary/cf-service-replica.yml",
        "patchSetId": 13
      },
      "lineNbr": 233,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-22T12:27:40Z",
      "side": 1,
      "message": "the same answer as above",
      "parentUuid": "6bea1e63_de990dc9",
      "range": {
        "startLine": 230,
        "startChar": 0,
        "endLine": 233,
        "endChar": 19
      },
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6ab8b83a_f224fd12",
        "filename": "dual-primary/cf-service-replica.yml",
        "patchSetId": 13
      },
      "lineNbr": 233,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-12-22T21:12:34Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "cbf336c6_0f4a5c3b",
      "range": {
        "startLine": 230,
        "startChar": 0,
        "endLine": 233,
        "endChar": 19
      },
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca327cd4_69e9e04b",
        "filename": "gerrit/entrypoint.sh",
        "patchSetId": 13
      },
      "lineNbr": 14,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-21T17:08:00Z",
      "side": 1,
      "message": "I dont remember why we added this",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "32788375_9c51cbec",
        "filename": "gerrit/entrypoint.sh",
        "patchSetId": 13
      },
      "lineNbr": 14,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2022-12-21T17:44:32Z",
      "side": 1,
      "message": "because before global-refdb code was included in multi-site.jar but it was a bug",
      "parentUuid": "ca327cd4_69e9e04b",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fcccfd1_c83eb64d",
        "filename": "gerrit/etc/replication_replica.config.template",
        "patchSetId": 13
      },
      "lineNbr": 10,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-12-22T09:23:42Z",
      "side": 1,
      "message": "Regardless which instanceId triggered the pull-replication we always get from the primaries load balancer?\n\nShouldn\u0027t we get primary1 instance requests from primary1 LB and primary2 instance requests from primary2 instead?",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7e2898aa_593b1665",
        "filename": "gerrit/etc/replication_replica.config.template",
        "patchSetId": 13
      },
      "lineNbr": 10,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-22T12:27:40Z",
      "side": 1,
      "message": "\u003e Shouldn\u0027t we get primary1 instance requests from primary1 LB and primary2 instance requests from primary2 instead?\n\nif primary1 and primary2 share the data via AWS EBS Elastic Volumes, do we care who serve the data? it looks more scalable and resilient to have a LB that serves data from both.",
      "parentUuid": "3fcccfd1_c83eb64d",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc528050_de0976e9",
        "filename": "gerrit/etc/replication_replica.config.template",
        "patchSetId": 13
      },
      "lineNbr": 10,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-12-22T21:12:34Z",
      "side": 1,
      "message": "Should this be called \"HTTP_PRIMARIES_LB\" to be consistent with the naming convention we used throughout the template?",
      "range": {
        "startLine": 10,
        "startChar": 11,
        "endLine": 10,
        "endChar": 26
      },
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d6996d6f_b8fc517d",
        "filename": "gerrit/etc/replication_replica.config.template",
        "patchSetId": 13
      },
      "lineNbr": 10,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-12-22T21:12:34Z",
      "side": 1,
      "message": "\u003e \u003e Shouldn\u0027t we get primary1 instance requests from primary1 LB and primary2 instance requests from primary2 instead?\n\u003e \n\u003e if primary1 and primary2 share the data via AWS EBS Elastic Volumes, do we care who serve the data? it looks more scalable and resilient to have a LB that serves data from both.\n\nYou\u0027re right, primary1 and primary2 share _git_ data via EFS (note not EBS), so perhaps it makes no difference.\n\nDo you guys know if it\u0027s guaranteed that git data is immediately available through the _other_ gerri in _every_ case? I am thinking for example `trustFolderStats`.",
      "parentUuid": "7e2898aa_593b1665",
      "revId": "c25ac90296c5f1e179c1142c8f8147c1aecf92d7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}