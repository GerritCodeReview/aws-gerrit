{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "dbef682d_d7a827dc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-14T01:46:37Z",
      "side": 1,
      "message": "This is working E2E, see:\nhttps://gerrit-ci.gerritforge.com/job/gatling-gerrit-test/296/console",
      "revId": "b6f6350d2f5ae9674292de702abffd4e06032b1a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16dfe2e6_090e979f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-14T09:30:54Z",
      "side": 1,
      "message": "LGTM, however I would document, in a followup change, the usage of GERRIT_VERSION, GERRIT_PATCH and GERRIT_WAR_URL. I realised they are not mentioned at all in the documentation.\n\nIt might be worth adding them since they are important parameters. I have added an issue for it: https://bugs.chromium.org/p/gerrit/issues/detail?id\u003d14387",
      "revId": "b6f6350d2f5ae9674292de702abffd4e06032b1a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "09778cea_e4c598e9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-14T12:13:37Z",
      "side": 1,
      "message": "We could merge, in theory, but let\u0027s wait for @Tony to answer on his -1.",
      "revId": "b6f6350d2f5ae9674292de702abffd4e06032b1a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "324b6ec2_d4e034f1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-14T12:23:22Z",
      "side": 1,
      "message": "Good to go ðŸ˜Š",
      "revId": "b6f6350d2f5ae9674292de702abffd4e06032b1a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f0da53cc_01dddca2",
        "filename": "gerrit/Makefile",
        "patchSetId": 6
      },
      "lineNbr": 53,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-14T11:59:16Z",
      "side": 1,
      "message": "Do we need to explicitly set java 11?\nIs this going to work with 2.16?",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 20
      },
      "revId": "b6f6350d2f5ae9674292de702abffd4e06032b1a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7ef54bbe_775f85a4",
        "filename": "gerrit/Makefile",
        "patchSetId": 6
      },
      "lineNbr": 53,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-14T12:13:37Z",
      "side": 1,
      "message": "AFAIK a Java 11 executable can run a Java 8 war file, isn\u0027t it?",
      "parentUuid": "f0da53cc_01dddca2",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 20
      },
      "revId": "b6f6350d2f5ae9674292de702abffd4e06032b1a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cd2a249e_393be737",
        "filename": "gerrit/Makefile",
        "patchSetId": 6
      },
      "lineNbr": 53,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-14T12:23:22Z",
      "side": 1,
      "message": "Yep, makes sense",
      "parentUuid": "7ef54bbe_775f85a4",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 20
      },
      "revId": "b6f6350d2f5ae9674292de702abffd4e06032b1a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dab5a3ba_9b64a307",
        "filename": "gerrit/Makefile",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-14T11:59:16Z",
      "side": 1,
      "message": "When I suggested to extract the version from the jar I thought we were going to use it *for* setting up the environment, not just to verify that it matched the one provided.\n\nWhy having to specify versions in two different places, one explicitly via GERRIT_VERSION,GERRIT_PATCH and one, implicitly, via the provided war file? \nIf a war is provided why don\u0027t we just infer the environment needed from it?\n\nGERRIT_VERSION\u003d$(java -jar gerrit.war version | awk \u0027{print $3}\u0027 | cut -d \u0027-\u0027 -f1 | cut -d\u0027.\u0027 -f1,2)\n\nGERRIT_PATCH\u003d$(java -jar gerrit.war version | awk \u0027{print $3}\u0027 | cut -d \u0027-\u0027 -f1 | cut -d\u0027.\u0027 -f3)\n\nWDYT?",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 101
      },
      "revId": "b6f6350d2f5ae9674292de702abffd4e06032b1a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd9195c4_248707a2",
        "filename": "gerrit/Makefile",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-14T12:13:37Z",
      "side": 1,
      "message": "\u003e When I suggested to extract the version from the jar I thought we were going to use it *for* setting up the environment, not just to verify that it matched the one provided.\n\u003e \n\u003e Why having to specify versions in two different places, one explicitly via GERRIT_VERSION,GERRIT_PATCH and one, implicitly, via the provided war file? \n\u003e If a war is provided why don\u0027t we just infer the environment needed from it?\n\nNot really: we can infer the GERRIT_VERSION but not the GERRIT_PATCH. So, we would need GERRIT_PATCH anyway.\n\n\u003e GERRIT_PATCH\u003d$(java -jar gerrit.war version | awk \u0027{print $3}\u0027 | cut -d \u0027-\u0027 -f1 | cut -d\u0027.\u0027 -f3)\n\nNot sure this would always work, as the version may \"misinterpret\" the patch version.",
      "parentUuid": "dab5a3ba_9b64a307",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 101
      },
      "revId": "b6f6350d2f5ae9674292de702abffd4e06032b1a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d12c53e_54487ee4",
        "filename": "gerrit/Makefile",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-14T12:23:22Z",
      "side": 1,
      "message": "\u003e \u003e When I suggested to extract the version from the jar I thought we were going to use it *for* setting up the environment, not just to verify that it matched the one provided.\n\u003e \u003e \n\u003e \u003e Why having to specify versions in two different places, one explicitly via GERRIT_VERSION,GERRIT_PATCH and one, implicitly, via the provided war file? \n\u003e \u003e If a war is provided why don\u0027t we just infer the environment needed from it?\n\u003e \n\u003e Not really: we can infer the GERRIT_VERSION but not the GERRIT_PATCH. So, we would need GERRIT_PATCH anyway.\n\u003e \n\u003e \u003e GERRIT_PATCH\u003d$(java -jar gerrit.war version | awk \u0027{print $3}\u0027 | cut -d \u0027-\u0027 -f1 | cut -d\u0027.\u0027 -f3)\n\u003e \n\u003e Not sure this would always work, as the version may \"misinterpret\" the patch version.\n\nI am not sure by \"the version may \"misinterpret\" the patch version.\"? you probably can think of some cases I am not aware of.\n\nAnyway, I think this change is definitely good enough for now, and we can always improve later if needed, I will remove my -1 ðŸ˜Š",
      "parentUuid": "dd9195c4_248707a2",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 101
      },
      "revId": "b6f6350d2f5ae9674292de702abffd4e06032b1a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}